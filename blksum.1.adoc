BLKSUM(1)
=========
:doctype: manpage

NAME
----

blksum - compute message digest for disk images

SYNOPSYS
--------

*blksum* [-w WORKERS] 'DIGEST' ['SOURCE']

DESCRIPTION
-----------

blksum print a checksum for disk image guest visible content. You can
compare the checksum for disk images in different image format.

'DIGEST' is any message digest name supported by openssl. To list
availabe names run:

    openssl dgst -list

'SOURCE' can be a file or NBD URL.

If 'SOURCE' is not specified, read data from stadard input. This can be
used only for raw images.

OPTIONS
-------

*-w, --workers*='WORKERS'::
  Set the number of workers. The default (4) gives good performance but on
  large machines you may want to use more workers. The valid value is 1 up to
  the number of online cpus.

USING QEMU-NBD
--------------

For best performance when exporting images via 'qemu-nbd(8)' set the '--shared'
option to value larger than the number of workers. For example if using 4
workers, use:

    qemu-nbd --shared 5 -t -r -k /tmp/nbd.sock -f qcow2 disk.qcow2

EXAMPLES
--------

`blksum sha1 disk.qcow2`::
    Print a sha1 checkum for disk.qcow2.

`blksum blake2b512 nbd+unix:///?socket=/tmp/nbd.sock`::
    Print a blake2b checksum for and image exported via NBD server.

`blksum sha1 <disk.img`::
    Print a sha1 checksum for data read from standard input.

COPYRIGHT
---------

Copyright (C) Nir Soffer. License LGPLv2+.

SEE ALSO
--------

qemu-nbd(8), openssl(1)
